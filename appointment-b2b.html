<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SlotManager - Ä°ÅŸletme Paneli | Randevu Abonelik Sistemi</title>
  <meta name="description" content="SlotManager ile randevu kayÄ±plarÄ±nÄ±zÄ± Ã¶nleyin, gelirinizi garanti altÄ±na alÄ±n. Abonelik tabanlÄ± randevu yÃ¶netim sistemi.">
  <link rel="shortcut icon" href="./assets/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/css/appointment-system.css">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>

<body>
  <main class="appointment-main">

    <!-- Auth Section (Login/Register) -->
    <section class="auth-section" id="authSection">
      <div class="auth-container">
        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="login">GiriÅŸ Yap</button>
          <button class="auth-tab" data-tab="register">KayÄ±t Ol</button>
        </div>

        <!-- Login Form -->
        <div class="auth-form active" id="loginForm">
          <h2>Ä°ÅŸletme GiriÅŸi</h2>
          <form id="loginFormElement" onsubmit="handleLogin(event)">
            <div class="form-group">
              <label>E-posta</label>
              <input type="email" id="loginEmail" required>
            </div>
            <div class="form-group">
              <label>Parola</label>
              <input type="password" id="loginPassword" required>
            </div>
            <button type="submit" class="btn btn-primary">GiriÅŸ Yap</button>
          </form>
          
          <!-- Demo Accounts -->
          <div class="demo-accounts">
            <div class="demo-divider">
              <span>Demo Hesaplar</span>
            </div>
            <div class="demo-account-list">
              <div class="demo-account-item" onclick="fillLogin('elite@berber.com', '123456')">
                <div class="demo-account-icon">ðŸ’‡</div>
                <div class="demo-account-info">
                  <strong>Elite Berber Salonu</strong>
                  <span>elite@berber.com</span>
                </div>
                <ion-icon name="arrow-forward-circle"></ion-icon>
              </div>
              <div class="demo-account-item" onclick="fillLogin('info@autofix.com', '123456')">
                <div class="demo-account-icon">ðŸ”§</div>
                <div class="demo-account-info">
                  <strong>AutoFix Oto Tamiri</strong>
                  <span>info@autofix.com</span>
                </div>
                <ion-icon name="arrow-forward-circle"></ion-icon>
              </div>
              <div class="demo-account-item" onclick="fillLogin('hello@tattooart.com', '123456')">
                <div class="demo-account-icon">ðŸŽ¨</div>
                <div class="demo-account-info">
                  <strong>Tattoo Studio Art</strong>
                  <span>hello@tattooart.com</span>
                </div>
                <ion-icon name="arrow-forward-circle"></ion-icon>
              </div>
              <div class="demo-account-item" onclick="fillLogin('info@guzellik.com', '123456')">
                <div class="demo-account-icon">âœ¨</div>
                <div class="demo-account-info">
                  <strong>GÃ¼zellik Merkezi</strong>
                  <span>info@guzellik.com</span>
                </div>
                <ion-icon name="arrow-forward-circle"></ion-icon>
              </div>
            </div>
            <p class="demo-note">ðŸ’¡ Demo hesaplarÄ±n parolasÄ±: <strong>123456</strong></p>
          </div>
        </div>

        <!-- Register Form -->
        <div class="auth-form" id="registerForm">
          <h2>Ä°ÅŸletme KaydÄ±</h2>
          <form id="registerFormElement" onsubmit="handleRegister(event)">
            <div class="form-group">
              <label>E-posta</label>
              <input type="email" id="registerEmail" required>
            </div>
            <div class="form-group">
              <label>Parola</label>
              <input type="password" id="registerPassword" required>
            </div>
            <div class="form-group">
              <label>Ä°ÅŸletme AdÄ±</label>
              <input type="text" id="registerBusinessName" required>
            </div>
            <div class="form-group">
              <label>Meslek</label>
              <select id="registerProfession" required>
                <option value="">-- SeÃ§iniz --</option>
              </select>
            </div>
            <div class="form-group">
              <label>Telefon</label>
              <input type="tel" id="registerPhone" required>
            </div>
            <div class="form-group">
              <label>Adres</label>
              <textarea id="registerAddress" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">KayÄ±t Ol</button>
          </form>
        </div>
      </div>
    </section>

    <!-- Dashboard Section -->
    <section class="dashboard-section" id="dashboardSection" style="display: none;">
      <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
          <div class="sidebar-brand">
            <div class="brand-logo">
              <ion-icon name="shield-checkmark"></ion-icon>
              <span class="brand-name">SlotManager</span>
            </div>
            <p class="brand-tagline">Randevu GÃ¼venliÄŸiniz, Geliriniz Garanti</p>
          </div>
          <div class="sidebar-user">
            <div class="user-avatar">
              <ion-icon name="business"></ion-icon>
            </div>
            <div class="user-details">
              <h3 id="sidebarUserInfo">Ä°ÅŸletme AdÄ±</h3>
              <p>Ä°ÅŸletme HesabÄ±</p>
            </div>
          </div>
          <nav class="sidebar-nav">
            <button class="sidebar-nav-btn active" data-page="overview">
              <ion-icon name="stats-chart"></ion-icon>
              <span>Genel BakÄ±ÅŸ</span>
            </button>
            <button class="sidebar-nav-btn" data-page="appointments">
              <ion-icon name="calendar"></ion-icon>
              <span>Randevular</span>
            </button>
            <button class="sidebar-nav-btn" data-page="subscriptions">
              <ion-icon name="card"></ion-icon>
              <span>Abonelikler</span>
            </button>
            <button class="sidebar-nav-btn" data-page="settings">
              <ion-icon name="settings"></ion-icon>
              <span>Ayarlar</span>
            </button>
          </nav>
          <div class="sidebar-footer">
            <button class="btn btn-secondary btn-full" onclick="appointmentSystem.logout()">
              <ion-icon name="log-out"></ion-icon>
              <span>Ã‡Ä±kÄ±ÅŸ Yap</span>
            </button>
          </div>
        </aside>

        <!-- Main Content -->
        <div class="dashboard-content">
          <div class="dashboard-container">
            <!-- Overview Page -->
            <div class="dashboard-page active" id="overviewPage">
              <h2>Genel BakÄ±ÅŸ</h2>
              <div class="stats-grid">
                <div class="stat-card">
                  <h3>Aktif Randevular</h3>
                  <p class="stat-number" id="statActiveAppointments">0</p>
                </div>
                <div class="stat-card">
                  <h3>Aktif Abonelikler</h3>
                  <p class="stat-number" id="statActiveSubscriptions">0</p>
                </div>
                <div class="stat-card">
                  <h3>Bu Ay Gelir</h3>
                  <p class="stat-number" id="statMonthlyRevenue">0 â‚º</p>
                </div>
                <div class="stat-card">
                  <h3>Toplam MÃ¼ÅŸteri</h3>
                  <p class="stat-number" id="statTotalCustomers">0</p>
                </div>
              </div>
            </div>

            <!-- Appointments Page -->
            <div class="dashboard-page" id="appointmentsPage">
              <div class="page-header">
                <h2>Randevular</h2>
                <button class="btn btn-primary" onclick="showCreateAppointmentModal()">Yeni Randevu</button>
              </div>
              <div class="appointments-list" id="appointmentsList">
                <!-- Appointments will be loaded here -->
              </div>
            </div>

            <!-- Subscriptions Page -->
            <div class="dashboard-page" id="subscriptionsPage">
              <div class="page-header">
                <h2>Abonelik Paketleri</h2>
                <button class="btn btn-primary" onclick="showCreatePlanModal()">Yeni Paket</button>
              </div>
              <div class="subscriptions-list" id="subscriptionsList">
                <!-- Subscription plans will be loaded here -->
              </div>
            </div>

            <!-- Settings Page -->
            <div class="dashboard-page" id="settingsPage">
              <h2>Ä°ÅŸletme AyarlarÄ±</h2>
              <form id="settingsForm">
                <div class="form-group">
                  <label>Ä°ÅŸletme AdÄ±</label>
                  <input type="text" id="settingsBusinessName" required>
                </div>
                <div class="form-group">
                  <label>Meslek</label>
                  <select id="settingsProfession" required>
                    <option value="">-- SeÃ§iniz --</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Telefon</label>
                  <input type="tel" id="settingsPhone" required>
                </div>
                <div class="form-group">
                  <label>Adres</label>
                  <textarea id="settingsAddress" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Kaydet</button>
              </form>
          </div>
          </div>
        </div>
      </div>
      
      <!-- Auth Visual Side -->
      <div class="auth-visual">
        <div class="auth-visual-content">
          <div class="brand-showcase">
            <ion-icon name="shield-checkmark"></ion-icon>
            <h1>SlotManager</h1>
            <p class="tagline">Randevu GÃ¼venliÄŸiniz, Geliriniz Garanti</p>
          </div>
          <div class="features-showcase">
            <div class="feature-item">
              <ion-icon name="calendar"></ion-icon>
              <h3>Randevu YÃ¶netimi</h3>
              <p>TÃ¼m randevularÄ±nÄ±zÄ± tek yerden yÃ¶netin</p>
            </div>
            <div class="feature-item">
              <ion-icon name="card"></ion-icon>
              <h3>Abonelik Sistemi</h3>
              <p>MÃ¼ÅŸterileriniz iÃ§in esnek abonelik paketleri</p>
            </div>
            <div class="feature-item">
              <ion-icon name="shield"></ion-icon>
              <h3>Gelir Garantisi</h3>
              <p>No-show'lardan kaynaklÄ± kayÄ±plarÄ± Ã¶nleyin</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modals -->
  <div class="modal" id="createAppointmentModal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('createAppointmentModal')">&times;</span>
      <h2>Yeni Randevu</h2>
      <form id="createAppointmentForm">
        <div class="form-group">
          <label>MÃ¼ÅŸteri E-posta</label>
          <input type="email" id="appointmentCustomerEmail" required>
        </div>
        <div class="form-group">
          <label>Tarih</label>
          <input type="date" id="appointmentDate" required>
        </div>
        <div class="form-group">
          <label>Saat</label>
          <input type="time" id="appointmentTime" required>
        </div>
        <div class="form-group">
          <label>Hizmet</label>
          <input type="text" id="appointmentService" required>
        </div>
        <button type="submit" class="btn btn-primary">OluÅŸtur</button>
      </form>
    </div>
  </div>

  <div class="modal" id="createPlanModal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('createPlanModal')">&times;</span>
      <h2>Yeni Abonelik Paketi</h2>
      <form id="createPlanForm">
        <div class="form-group">
          <label>Paket AdÄ±</label>
          <input type="text" id="planName" required>
        </div>
        <div class="form-group">
          <label>Fiyat (â‚º)</label>
          <input type="number" id="planPrice" min="0" step="0.01" required>
        </div>
        <div class="form-group">
          <label>SÃ¼re (GÃ¼n)</label>
          <input type="number" id="planDuration" min="1" required>
        </div>
        <div class="form-group">
          <label>Avantajlar (Her satÄ±ra bir avantaj)</label>
          <textarea id="planBenefits" rows="4" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">OluÅŸtur</button>
      </form>
    </div>
  </div>

  <script>
    // Force dark mode as default
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
    
    // Fill login form with demo account
    function fillLogin(email, password) {
      document.getElementById('loginEmail').value = email;
      document.getElementById('loginPassword').value = password;
      // Auto submit after filling
      setTimeout(() => {
        const form = document.getElementById('loginFormElement');
        if (form) form.dispatchEvent(new Event('submit', { cancelable: true }));
      }, 100);
    }
    
    // Handle login form submit
    function handleLogin(e) {
      e.preventDefault();
      if (typeof appointmentSystem === 'undefined') {
        alert('Sistem yÃ¼kleniyor, lÃ¼tfen bekleyin...');
        setTimeout(() => handleLogin(e), 200);
        return;
      }
      
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        alert('LÃ¼tfen e-posta ve parola giriniz.');
        return;
      }
      
      const result = appointmentSystem.login(email, password);
      
      if (result.success) {
        if (typeof showDashboard === 'function') {
          showDashboard();
        } else {
          location.reload();
        }
      } else {
        alert(result.message || 'GiriÅŸ baÅŸarÄ±sÄ±z. LÃ¼tfen bilgilerinizi kontrol ediniz.');
      }
    }
    
    // Handle register form submit
    function handleRegister(e) {
      e.preventDefault();
      if (typeof appointmentSystem === 'undefined') {
        alert('Sistem yÃ¼kleniyor, lÃ¼tfen bekleyin...');
        setTimeout(() => handleRegister(e), 200);
        return;
      }
      
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const businessName = document.getElementById('registerBusinessName').value;
      const profession = document.getElementById('registerProfession').value;
      const phone = document.getElementById('registerPhone').value;
      const address = document.getElementById('registerAddress').value;
      
      if (!email || !password || !businessName || !profession || !phone || !address) {
        alert('LÃ¼tfen tÃ¼m alanlarÄ± doldurunuz.');
        return;
      }
      
      const userResult = appointmentSystem.register(email, password, {
        businessName,
        profession,
        phone,
        address
      }, 'b2b');
      
      if (userResult.success) {
        alert('KayÄ±t baÅŸarÄ±lÄ±! GiriÅŸ yapÄ±lÄ±yor...');
        appointmentSystem.login(email, password);
        if (typeof showDashboard === 'function') {
          showDashboard();
        } else {
          location.reload();
        }
      } else {
        alert(userResult.message || 'KayÄ±t baÅŸarÄ±sÄ±z.');
      }
    }
  </script>
  <script src="./assets/js/appointment-system.js"></script>
  <script src="./assets/js/appointment-b2b.js"></script>
</body>

</html>
